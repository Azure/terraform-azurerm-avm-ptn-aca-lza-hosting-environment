<!-- BEGIN_TF_DOCS -->
<!-- Code generated by terraform-docs. DO NOT EDIT. -->
# Front Door Premium with Private Link Example

This example demonstrates how to deploy the Azure Container Apps Landing Zone Accelerator with Azure Front Door Premium as the ingress solution, using Private Link to securely connect to the internal Container Apps Environment.

## Key Features

- **Azure Front Door Premium**: Automatically configured when Front Door ingress is selected
- **Private Link**: Enabled by default to securely connect Front Door to the internal Container Apps Environment
- **Optional WAF**: Web Application Firewall can be optionally enabled (disabled in this example)
- **No Application Gateway**: Front Door replaces Application Gateway for ingress
- **Sample Application**: Deployed to demonstrate connectivity

## Architecture

When using Front Door with the internal Container Apps Environment:
1. Front Door Premium SKU is mandatory (required for Private Link support)
2. Private Link is automatically enabled to connect to the internal Container Apps Environment
3. Traffic flows through Azure's private backbone network instead of the public internet
4. WAF protection is optional and can be enabled via the `front_door_enable_waf` variable

```hcl
terraform {
  required_version = ">= 1.9, < 2.0"

  required_providers {
    azurerm = {
      source  = "hashicorp/azurerm"
      version = "~> 4.0"
    }
    random = {
      source  = "hashicorp/random"
      version = "~> 3.6"
    }
  }
}

provider "azurerm" {
  features {
    resource_group {
      prevent_deletion_if_contains_resources = false
    }
  }
  storage_use_azuread = true
}

# Random suffix for globally unique names
resource "random_string" "suffix" {
  length  = 5
  numeric = true
  special = false
  upper   = false
}

# This ensures we have unique CAF compliant names for our resources.
module "naming" {
  source  = "Azure/naming/azurerm"
  version = "0.4.2"
}

# Test resource group for the module
resource "azurerm_resource_group" "this" {
  location = "swedencentral"
  name     = module.naming.resource_group.name_unique
}

# Front Door Premium with Private Link scenario
# Note: Front Door automatically uses Premium SKU with Private Link for internal Container Apps Environment
module "aca_lza_hosting" {
  source = "../../"

  # Observability
  enable_application_insights = true
  enable_dapr_instrumentation = false
  # Core
  location                                      = azurerm_resource_group.this.location
  spoke_infra_subnet_address_prefix             = "10.20.1.0/24"
  spoke_private_endpoints_subnet_address_prefix = "10.20.2.0/24"
  # Networking - Front Door doesn't need Application Gateway subnet
  spoke_vnet_address_prefixes = ["10.20.0.0/16"]
  # Optional features
  deploy_sample_application       = true
  deploy_zone_redundant_resources = true
  enable_ddos_protection          = false
  enable_telemetry                = var.enable_telemetry
  environment                     = "test"
  existing_resource_group_id      = azurerm_resource_group.this.id
  # Front Door Configuration
  # Front Door automatically uses Premium SKU with Private Link enabled
  expose_container_apps_with                  = "frontDoor"
  front_door_enable_waf                       = false # WAF is optional, defaults to disabled
  log_analytics_workspace_replication_enabled = false
  tags                                        = {}
  use_existing_resource_group                 = true
  vm_jumpbox_os_type                          = "none" # disable VM for this example
  # Naming - include random suffix for globally unique names
  workload_name = "fd${random_string.suffix.result}"
}







```

<!-- markdownlint-disable MD033 -->
## Requirements

The following requirements are needed by this module:

- <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) (>= 1.9, < 2.0)

- <a name="requirement_azurerm"></a> [azurerm](#requirement\_azurerm) (~> 4.0)

- <a name="requirement_random"></a> [random](#requirement\_random) (~> 3.6)

## Resources

The following resources are used by this module:

- [azurerm_resource_group.this](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/resource_group) (resource)
- [random_string.suffix](https://registry.terraform.io/providers/hashicorp/random/latest/docs/resources/string) (resource)

<!-- markdownlint-disable MD013 -->
## Required Inputs

No required inputs.

## Optional Inputs

The following input variables are optional (have default values):

### <a name="input_enable_telemetry"></a> [enable\_telemetry](#input\_enable\_telemetry)

Description: This variable controls whether or not telemetry is enabled for the module.

Type: `bool`

Default: `true`

## Outputs

The following outputs are exported:

### <a name="output_container_apps_environment_default_domain"></a> [container\_apps\_environment\_default\_domain](#output\_container\_apps\_environment\_default\_domain)

Description: The default domain of the Container Apps Environment

### <a name="output_container_apps_environment_id"></a> [container\_apps\_environment\_id](#output\_container\_apps\_environment\_id)

Description: The resource ID of the Container Apps Environment

### <a name="output_front_door_endpoint_hostname"></a> [front\_door\_endpoint\_hostname](#output\_front\_door\_endpoint\_hostname)

Description: The default *.azurefd.net hostname of the Front Door endpoint with Microsoft-managed certificate

### <a name="output_front_door_id"></a> [front\_door\_id](#output\_front\_door\_id)

Description: The resource ID of the Front Door profile

### <a name="output_key_vault_name"></a> [key\_vault\_name](#output\_key\_vault\_name)

Description: The name of the Key Vault

### <a name="output_resource_group_name"></a> [resource\_group\_name](#output\_resource\_group\_name)

Description: The name of the resource group

## Modules

The following Modules are called:

### <a name="module_aca_lza_hosting"></a> [aca\_lza\_hosting](#module\_aca\_lza\_hosting)

Source: ../../

Version:

### <a name="module_naming"></a> [naming](#module\_naming)

Source: Azure/naming/azurerm

Version: 0.4.2

## Clean Up

To remove all resources:

```bash
terraform destroy
```
<!-- END_TF_DOCS -->